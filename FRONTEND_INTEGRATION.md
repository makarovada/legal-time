# Интеграция фронтенда с базой данных

## Что было сделано

### 1. Создан API для Activity Types
- **Роутер**: `app/routers/activity_type.py`
- **CRUD**: `app/crud/activity_type.py`
- **Схемы**: `app/schemas/activity_type.py`
- **Эндпоинт**: `GET /api/activity-types` - доступен всем авторизованным пользователям

### 2. Обновлены права доступа
- **Matters (Дела)**: Теперь доступны для чтения всем авторизованным пользователям
  - `GET /api/matters` - список дел (все авторизованные)
  - `GET /api/matters/{id}` - конкретное дело (все авторизованные)
  - Создание/редактирование/удаление - только админы

### 3. Обновлен фронтенд
- **TimeEntries**: Теперь загружает activity types из API вместо хардкода
- Добавлена обработка ошибок при загрузке данных
- Все данные загружаются параллельно через `Promise.all`

## Структура данных

### Time Entries (Учёт времени)
- Загружает: свои записи времени, список дел (matters), типы активности (activity types)
- Создает: новые записи с выбором дела и типа активности

### Matters (Дела)
- Показывает: код, название, договор, описание
- Требует: список договоров для создания/редактирования

### Contracts (Договоры)
- Показывает: номер, клиент, дата
- Требует: список клиентов для создания/редактирования

### Clients (Клиенты)
- Показывает: название, тип (юридическое/физическое лицо)

## API эндпоинты

### Доступны всем авторизованным:
- `GET /api/time-entries` - свои записи времени
- `GET /api/matters` - список дел
- `GET /api/activity-types` - типы активности

### Только для админов:
- `GET /api/clients` - список клиентов
- `GET /api/contracts` - список договоров
- `POST/PUT/DELETE` для всех сущностей (кроме time entries)

## Следующие шаги

1. Добавить фильтрацию и сортировку для списков
2. Добавить пагинацию
3. Улучшить отображение связанных данных (показывать имя клиента в деле)
4. Добавить загрузку данных для Dashboard (статистика)


